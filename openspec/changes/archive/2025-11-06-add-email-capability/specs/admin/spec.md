# Admin Specification - Add Email Capability Delta

## ADDED Requirements

### Requirement: Email Service Integration
The system SHALL integrate with Resend email service for sending notifications.

#### Scenario: Resend Configuration
- **GIVEN** API_KEY_RESEND is set in environment
- **WHEN** system initializes email service
- **THEN** Resend client is configured with API key

#### Scenario: Email Queue Processing
- **WHEN** email is queued for sending
- **THEN** Laravel queue processes email asynchronously
- **AND** email is sent via Resend API

### Requirement: Admin Password Reset Notifications
The system SHALL send password reset emails to admin users.

#### Scenario: Password Reset Email Content
- **GIVEN** admin user exists with email
- **WHEN** password is reset
- **THEN** email contains new password, login instructions, and security warnings

#### Scenario: Password Reset Email Delivery
- **WHEN** admin password reset is triggered
- **THEN** email is sent immediately to admin email address
- **AND** email delivery is logged for audit

#### Scenario: Password Reset Email Failure Handling
- **WHEN** email sending fails
- **THEN** error is logged and user is notified in UI
- **AND** system continues operation without email

### Requirement: Sale Credential Notifications
The system SHALL send login credentials to sale users via email.

#### Scenario: Sale Credentials Email Content
- **GIVEN** sale user created with email
- **WHEN** credentials are generated
- **THEN** email contains username (email), password, assigned markets, and login URL

#### Scenario: Sale Credentials Email Delivery
- **WHEN** sale credentials are generated by admin
- **THEN** email is sent immediately to sale email address
- **AND** delivery confirmation is shown to admin

#### Scenario: Bulk Sale Credential Generation
- **WHEN** multiple sales are created
- **THEN** each sale receives individual credential email
- **AND** admin receives summary of sent emails

### Requirement: Email Template Management
The system SHALL provide customizable email templates.

#### Scenario: Email Template Customization
- **WHEN** admin needs custom email templates
- **THEN** templates are stored in resources/views/emails
- **AND** templates use Blade syntax for dynamic content

#### Scenario: Email Branding
- **WHEN** email is sent
- **THEN** includes brand name and logo from global settings
- **AND** matches application branding

## MODIFIED Requirements

### Requirement: Admin User Creation (Modified)
The system SHALL support creating admin users with email verification.

#### Scenario: Admin Creation with Email Notification
- **WHEN** admin user is created
- **THEN** welcome email is sent with login instructions
- **AND** email includes temporary password if not set

### Requirement: Sale User Creation (Modified)
The system SHALL support creating sale users with credential delivery.

#### Scenario: Sale Creation with Email Credentials
- **WHEN** sale user is created
- **THEN** credential email is automatically sent
- **AND** email includes market assignments and contact information
